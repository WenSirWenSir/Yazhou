package com.zbyj.Yazhou.ProgramFrame;import android.annotation.SuppressLint;import android.annotation.TargetApi;import android.graphics.Color;import android.graphics.drawable.GradientDrawable;import android.os.Bundle;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.Toast;import com.baidu.location.BDAbstractLocationListener;import com.baidu.location.BDLocation;import com.baidu.location.LocationClient;import com.baidu.location.LocationClientOption;import com.baidu.mapapi.SDKInitializer;import com.baidu.mapapi.map.BaiduMap;import com.baidu.mapapi.map.MapStatusUpdate;import com.baidu.mapapi.map.MapStatusUpdateFactory;import com.baidu.mapapi.map.MapView;import com.baidu.mapapi.map.MyLocationData;import com.baidu.mapapi.model.LatLng;import com.zbyj.Yazhou.LeftCompanyProgram.CompanyClass.LeftCompanyProgramFragment;import com.zbyj.Yazhou.LeftCompanyProgram.Tools;import com.zbyj.Yazhou.ProgramAct.UserAddHomeAddrAct;import com.zbyj.Yazhou.ProgramAct.UserAllAddrsAct;import com.zbyj.Yazhou.R;import com.zbyj.Yazhou.config;/** * 订单的主界面 也是软件的主界面 */public class MainFrame extends LeftCompanyProgramFragment {    private MapView mapView;    private BaiduMap baiduMap;    private LocationClient mLocationClient;    @Override    @SuppressLint("NewApi")    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle            savedInstanceState) {        SDKInitializer.initialize(getContext());        View view = LayoutInflater.from(getContext()).inflate(R.layout.framelayout_order, null);        init(view);        return view;    }    @SuppressLint({"NewApi", "ResourceType"})    private void init(View view) {        view.findViewById(R.id.framelayout_OrderListbody).setBackground(Tools.setBackgroundType(1,getResources().getString(R.color.TextAndBodyColor),"#f9f9f9",5));        mapView = view.findViewById(R.id.framelayout_order_mapview);        baiduMap = mapView.getMap();//获取地图控件        baiduMap.setMyLocationEnabled(true);//允许设置地图空间        mLocationClient = new LocationClient(getContext());        LocationClientOption options = new LocationClientOption();        options.setCoorType("bd09ll");        options.setIsNeedAddress(true);        options.setOpenGps(true);        mLocationClient.setLocOption(options);        mLocationClient.registerLocationListener(new BDAbstractLocationListener() {            @Override            public void onReceiveLocation(BDLocation bdLocation) {                //地图控件的监听回调事件                Log.i(config.DEBUG_STR, "调用开始");                if (mapView == null) {                    Log.e(config.DEBUG_STR, "mapView的控件为空");                    mLocationClient.stop();                } else {                    /**                     * 这个可以显示蓝点位置                     *                     * accuracy 是误差半径                     */                    MyLocationData myLocationData = new MyLocationData.Builder().accuracy(300)                            .direction(bdLocation.getDirection()).latitude(bdLocation.getLatitude                                    ()).longitude(bdLocation.getLongitude()).build();                    baiduMap.setMyLocationData(myLocationData);                    /**                     * 这个是移动到该位置的调用                     */                    LatLng latLng = new LatLng(bdLocation.getLatitude(), bdLocation.getLongitude());                    MapStatusUpdate mapStatusUpdate = MapStatusUpdateFactory.newLatLng(latLng);                    baiduMap.animateMapStatus(mapStatusUpdate);                    mapStatusUpdate = MapStatusUpdateFactory.zoomTo(16);                    baiduMap.animateMapStatus(mapStatusUpdate);                }            }        });        mLocationClient.start();        Listener(view);    }    @SuppressLint("NewApi")    private void Listener(View v) {        v.findViewById(R.id.framelayout_order_btn_changeaddr).setOnClickListener(new View                .OnClickListener() {            @Override            public void onClick(View v) {                //用户点击请求更改默认地址                LCPF_StartActivity(UserAllAddrsAct.class);            }        });        v.findViewById(R.id.framelayout_order_btn_CreatePage).setOnClickListener(new View                .OnClickListener() {            @Override            public void onClick(View v) {                //用户点击生成订单                Toast.makeText(getActivity(), "用户点击创建订单", Toast.LENGTH_SHORT).show();            }        });    }}