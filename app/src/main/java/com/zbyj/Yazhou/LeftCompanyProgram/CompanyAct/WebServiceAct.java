package com.zbyj.Yazhou.LeftCompanyProgram.CompanyAct;import android.content.Intent;import android.graphics.Bitmap;import android.graphics.Color;import android.os.Bundle;import android.util.Log;import android.view.KeyEvent;import android.view.View;import android.view.ViewGroup;import android.view.Window;import android.webkit.WebSettings;import android.webkit.WebView;import android.webkit.WebViewClient;import android.widget.LinearLayout;import android.widget.Toast;import com.zbyj.Yazhou.LeftCompanyProgram.CompanyPage.WEB_VALUES_ACT;import com.zbyj.Yazhou.LeftCompanyProgram.CompanyPage.WINDOW_PAGE;import com.zbyj.Yazhou.LeftCompanyProgram.Config;import com.zbyj.Yazhou.LeftCompanyProgram.Factory.DialogFactory;import com.zbyj.Yazhou.LeftCompanyProgram.Views.LeftCompanyPorgramListView;import com.zbyj.Yazhou.R;/** * 用来管理显示Url的View界面 * <p> */public class WebServiceAct extends LeftCompanyAct {    private WebView _WebView;    private DialogFactory.RefreshDialog refreshDialog;    @Override    protected void onCreate(Bundle savedInstanceState) {        LinearLayout item = new LinearLayout(getApplicationContext());        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams                .MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);        item.setLayoutParams(params);//设置布局        item.setBackgroundColor(Color.parseColor("#ffffff"));        //增加WebView布局        _WebView = new WebView(item.getContext());        item.addView(_WebView);        setContentView(item);        //获取构造数据信息        WEB_VALUES_ACT web_values_act = (WEB_VALUES_ACT) getIntent().getSerializableExtra                (WINDOW_PAGE.RESULT_WEBVIEW);        if (web_values_act != null) {            Log.i(Config.DEBUG, "WebServiceAct.java[+]获取到的构造的URL:" + web_values_act.get_url());            _WebView.loadUrl(web_values_act.get_url());            WebSettings webSettings = _WebView.getSettings();//获取配置            webSettings.setJavaScriptEnabled(true);//对JAVA的支持            refreshDialog = new DialogFactory().new RefreshDialog(WebServiceAct.this);            refreshDialog.setDialogView(R.layout.item_wait);            refreshDialog.intenstDialogView(R.id.item_wait_img,R.id.item_wait_msg,"正在加载",false);            _WebView.setWebViewClient(new WebViewClient() {                @Override                public boolean shouldOverrideUrlLoading(WebView view, String request) {                    view.loadUrl(request);                    return true;                }                @Override                public void onPageStarted(WebView view, String url, Bitmap favicon) {                }                @Override                public void onPageFinished(WebView view, String url) {                    refreshDialog.dismiss();                }            });        } else {            finish();            Log.e(Config.DEBUG, "WebServiceAct.java[+] 获取WEB_VALUES_ACT为null");        }        super.onCreate(savedInstanceState);    }    @Override    protected void onDestroy() {        if (_WebView != null) {            _WebView.clearCache(true);//清空缓存            _WebView.clearHistory();//清空历史            _WebView = null;            System.gc();        }        super.onDestroy();    }}